{"rendered_body": "<p>\u3053\u306e\u8a18\u4e8b\u306f<a href=\"https://qiita.com/advent-calendar/2018/xonsh\">xonsh advent calendar 2018</a>\u306e9\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002</p>\n\n<h1>\n<span id=\"tldr\" class=\"fragment\"></span><a href=\"#tldr\"><i class=\"fa fa-link\"></i></a>tl;dr</h1>\n\n<p>\u3053\u308c\u3092\u898b\u3066\u304f\u308c<br>\n<a href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F33562%2F1c13e71a-c934-ab12-b665-13acb9a2f665.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8edc83d9d1c5080c1bedf08c5a56a683\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F33562%2F1c13e71a-c934-ab12-b665-13acb9a2f665.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8edc83d9d1c5080c1bedf08c5a56a683\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2018-12-09 22.00.52.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/33562/1c13e71a-c934-ab12-b665-13acb9a2f665.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F33562%2F1c13e71a-c934-ab12-b665-13acb9a2f665.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=83dd1286d8c1272eb560245b815e588a 1x\" loading=\"lazy\"></a></p>\n\n<h1>\n<span id=\"\u306f\u3058\u3081\u306b\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>\u306f\u3058\u3081\u306b</h1>\n\n<p>\u53bb\u5e74\u306eAC\u306e\u6bb5\u968e\u3067\u306f\u66ab\u304f\u89e6\u3063\u3066\u300c\u307e\u3060\u3060\u306a\u2026\u2026\u300d\u3063\u3066\u306a\u3063\u3066\u3044\u305fxonsh\u3067\u3059\u304c\u3001\u6700\u8fd1\u307e\u305f\u89e6\u3063\u3066\u307f\u305f\u3068\u3053\u308d\u3001\u7d50\u69cb\u826f\u304f\u306a\u3063\u3066\u304a\u308a\u7121\u4e8bzsh\u304b\u3089\u306e\u4e57\u308a\u63db\u3048\u3092\u679c\u3057\u307e\u3057\u305f <img alt=\":clap:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f44f.png\" title=\":clap:\" width=\"20\" loading=\"lazy\"> <img alt=\":clap:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f44f.png\" title=\":clap:\" width=\"20\" loading=\"lazy\"> <img alt=\":clap:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f44f.png\" title=\":clap:\" width=\"20\" loading=\"lazy\"> <br>\n\u306e\u3067\u3001AC\u66f8\u304d\u307e\u3059\u3002</p>\n\n<p>\u6a19\u6e96\u3067\u5bfe\u5fdc\u3057\u3066\u3044\u308bmatplotlib\u4ee5\u5916\u3067\u3082\u3001PIL.Image\u3068\u304b\u8868\u793a\u3067\u304d\u305f\u3089\u6700\u9ad8\u3058\u3083\u306a\u3044\u3067\u3059\u304b\uff1f\uff1f\uff1f\u6700\u9ad8\u3067\u3059\u3088\u306d\uff01\uff01\uff01\u305d\u308c\u3092\u3084\u3063\u3066\u3044\u304d\u307e\u3057\u3087\u3046\uff01\uff01\uff01</p>\n\n<p>\u5185\u5bb9\u306f\u6c4e\u7528\u7684\u3067\u3059\u304c\u3001<a href=\"https://pypi.org/project/iterm2-tools/\" rel=\"nofollow noopener\" target=\"_blank\">iterm2-tools</a> \u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u305d\u306e\u307e\u307e\u3060\u3068iterm2\u304c\u7121\u3044\u3068\u52d5\u304b\u306a\u3044\u3067\u3059\u3002\u8a31\u3057\u3066\u304f\u308c\u2026\u2026\u3002\u5168\u4f53\u7684\u306b\u8a31\u3057\u3066\u304f\u308c\u2026\u2026\u3002</p>\n\n<h1>\n<span id=\"pretty-printing\" class=\"fragment\"></span><a href=\"#pretty-printing\"><i class=\"fa fa-link\"></i></a>pretty printing</h1>\n\n<p>\u76ee\u7acb\u305f\u306a\u3044\u6240\u306b <a href=\"https://xon.sh/api/pretty.html\" rel=\"nofollow noopener\" target=\"_blank\">pretty printing</a> \u306eAPI\u304c\u751f\u3048\u3066\u304a\u308a\u307e\u3057\u3066\u3001\u305d\u308c\u3092\u4f7f\u7528\u3059\u308b\u3068python\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306exonsh\u3067\u306e\u8868\u793a\u3092\u5f04\u308b\u4e8b\u304c\u51fa\u6765\u307e\u3059\u3002</p>\n\n<p>\u5f04\u308a\u305f\u3044\u30af\u30e9\u30b9\u306b <code>_repr_pretty_(p: RepresentationPrinter, cycle: bool) -&gt; None</code> \u3092\u751f\u3084\u305b\u3070\u826f\u3044\u3060\u3051\u3067\u3059\u306d\u3002</p>\n\n<p>\u8868\u793a\u3059\u308b\u6642\u306f\u3001\u7b2c\u4e00\u5f15\u6570\u306b\u4e0e\u3048\u3089\u308c\u308b <code>RepresentationPrinter</code> \u306e\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059<sup id=\"fnref1\"><a href=\"#fn1\" rel=\"footnote\" title='RepresentationPrinter -&gt; PrettyPrinter -&gt; _PrettyPrinterBase -&gt; object \u3068\u306a\u3063\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e PrettyPrinter \u306e\u30e1\u30bd\u30c3\u30c9\u3084\u3001 _PrettyPrinterBase \u306e\u30e1\u30bd\u30c3\u30c9\u3067\u3042\u308b indent(indent: int) \u3068 group(indent=0, open=\"\", close=\"\") \u3082\u4f7f\u7528\u53ef\u80fd\u3067\u3059\u3002'>1</a></sup></p>\n\n<p>\u518d\u5e30\u7684\u306a\u69cb\u9020\u306b\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u306b\u306f <code>cycle</code> \u306b <code>True</code> \u304c\u6e21\u3055\u308c\u307e\u3059\u306e\u3067\u3001\u30c1\u30a7\u30c3\u30af\u3057\u3066\u7121\u9650\u30eb\u30fc\u30d7\u3057\u306a\u3044\u69d8\u306b\u3057\u307e\u3057\u3087\u3046\u3002</p>\n\n<h1>\n<span id=\"hook\u3092\u4f7f\u7528\u3057\u3066pilimage\u3092import\u3059\u308b\u6642\u306b-_repr_pretty_-\u3092\u5dee\u3057\u8fbc\u3080\" class=\"fragment\"></span><a href=\"#hook%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%A6pilimage%E3%82%92import%E3%81%99%E3%82%8B%E6%99%82%E3%81%AB-_repr_pretty_-%E3%82%92%E5%B7%AE%E3%81%97%E8%BE%BC%E3%82%80\"><i class=\"fa fa-link\"></i></a>hook\u3092\u4f7f\u7528\u3057\u3066<code>PIL.Image</code>\u3092<code>import</code>\u3059\u308b\u6642\u306b <code>_repr_pretty_</code> \u3092\u5dee\u3057\u8fbc\u3080</h1>\n\n<p>\u30ed\u30fc\u30c9\u6642\u306b<code>PIL.Image</code>\u3092<code>import</code>\u3059\u308b\u306a\u3069\u3057\u3066 <code>_repr_pretty_</code> \u3092\u5dee\u3057\u8fbc\u3080\u3068\u3001\u8d77\u52d5\u6642\u9593\u304c\u9045\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001hook\u3092\u4f7f\u7528\u3057\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002</p>\n\n<p><code>on_import_post_exec_module</code> hook\u3092\u4f7f\u7528\u3059\u308b\u3068\u826f\u3044\u611f\u3058\u306b\u5dee\u3057\u8fbc\u3081\u308b\u3093\u3058\u3083\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002</p>\n\n<div class=\"code-frame\" data-lang=\"py\">\n<div class=\"code-lang\"><span class=\"bold\">.xonshrc</span></div>\n<div class=\"highlight\"><pre><span class=\"k\">def</span> <span class=\"nf\">_pil_repr_pretty_</span><span class=\"p\">(</span><span class=\"n\">pil</span><span class=\"p\">,</span> <span class=\"n\">p</span><span class=\"p\">,</span> <span class=\"n\">cycle</span><span class=\"p\">):</span>\n    <span class=\"kn\">from</span> <span class=\"nn\">io</span> <span class=\"kn\">import</span> <span class=\"n\">BytesIO</span>\n    <span class=\"kn\">from</span> <span class=\"nn\">iterm2_tools.images</span> <span class=\"kn\">import</span> <span class=\"n\">display_image_bytes</span>\n\n    <span class=\"n\">b</span> <span class=\"o\">=</span> <span class=\"n\">BytesIO</span><span class=\"p\">()</span>\n    <span class=\"n\">pil</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">(</span><span class=\"n\">b</span><span class=\"p\">,</span> <span class=\"nb\">format</span><span class=\"o\">=</span><span class=\"s\">'png'</span><span class=\"p\">)</span>\n    <span class=\"n\">ib</span> <span class=\"o\">=</span> <span class=\"n\">display_image_bytes</span><span class=\"p\">(</span><span class=\"n\">b</span><span class=\"o\">.</span><span class=\"n\">getbuffer</span><span class=\"p\">())</span>\n    <span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">text</span><span class=\"p\">(</span><span class=\"n\">ib</span><span class=\"p\">)</span>\n\n\n<span class=\"o\">@</span><span class=\"n\">events</span><span class=\"o\">.</span><span class=\"n\">on_import_post_exec_module</span>\n<span class=\"k\">def</span> <span class=\"nf\">handler</span><span class=\"p\">(</span><span class=\"n\">module</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n    <span class=\"k\">if</span> <span class=\"n\">module</span><span class=\"o\">.</span><span class=\"n\">__name__</span> <span class=\"o\">==</span> <span class=\"s\">\"PIL.Image\"</span><span class=\"p\">:</span>\n        <span class=\"n\">module</span><span class=\"o\">.</span><span class=\"n\">Image</span><span class=\"o\">.</span><span class=\"n\">_repr_pretty_</span> <span class=\"o\">=</span> <span class=\"n\">_pil_repr_pretty_</span>\n</pre></div>\n</div>\n\n<h1>\n<span id=\"\u3084\u3063\u3066\u307f\u308b\" class=\"fragment\"></span><a href=\"#%E3%82%84%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a>\u3084\u3063\u3066\u307f\u308b</h1>\n\n<p>\u306f\u3044\u3001\u66f8\u304d\u307e\u3057\u305f\u304b\uff1f\u66f8\u304d\u307e\u3057\u305f\u306d\uff1f<br>\n\u3067\u306f\u3001\u30c6\u30b9\u30c8\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002</p>\n\n<p><a href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F33562%2F7e63cba4-0d5f-1225-e116-06076e15794f.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b442d7c79dcb13dfa4c441a9a029c0ae\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F33562%2F7e63cba4-0d5f-1225-e116-06076e15794f.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b442d7c79dcb13dfa4c441a9a029c0ae\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2018-12-09 22.51.59.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/33562/7e63cba4-0d5f-1225-e116-06076e15794f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F33562%2F7e63cba4-0d5f-1225-e116-06076e15794f.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=de2b2642f49533dc69848aac2497d397 1x\" loading=\"lazy\"></a></p>\n\n<p>!???!?!?!?!!?!?!?!!</p>\n\n<h1>\n<span id=\"\u539f\u56e0\" class=\"fragment\"></span><a href=\"#%E5%8E%9F%E5%9B%A0\"><i class=\"fa fa-link\"></i></a>\u539f\u56e0</h1>\n\n<p>pygments\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u3066\u3001\u304b\u3064 $COLOR_RESULTS \u304c <code>True</code> \u3060\u3068<a href=\"https://github.com/xonsh/xonsh/blob/8fe0562318a8b1bc3c39b358ccd698f9d2d8437e/xonsh/main.py#L258-L259\" rel=\"nofollow noopener\" target=\"_blank\">\u51fa\u529b\u7d50\u679c\u3092pygments.lex\u306b\u901a\u3057\u3066\u3057\u307e\u3063\u3066\u30a8\u30b9\u30b1\u30fc\u30d7\u30b7\u30fc\u30b1\u30f3\u30b9\u304c\u5265\u3052\u308b</a>\u307f\u305f\u3044\u3067\u3059\u306d\u2026\u2026</p>\n\n<p>\u4ed5\u65b9\u7121\u3044\u306e\u3067\u3001<code>$COLOR_RESULTS = False</code> \u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u2026\u2026\u3057\u304b\u305f\u306a\u3044\u3063\u2026\u2026</p>\n\n<div class=\"code-frame\" data-lang=\"py\">\n<div class=\"code-lang\"><span class=\"bold\">.xonshrc</span></div>\n<div class=\"highlight\"><pre><span class=\"err\">$</span><span class=\"n\">COLOR_RESULTS</span> <span class=\"o\">=</span> <span class=\"bp\">False</span>\n</pre></div>\n</div>\n\n<p>\u3053\u308c\u3067\u7121\u4e8b\u3001\u8868\u793a\u3055\u308c\u308b\u3068\u601d\u3044\u307e\u3059\u3002</p>\n\n<p><a href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F33562%2F1c13e71a-c934-ab12-b665-13acb9a2f665.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8edc83d9d1c5080c1bedf08c5a56a683\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F33562%2F1c13e71a-c934-ab12-b665-13acb9a2f665.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8edc83d9d1c5080c1bedf08c5a56a683\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2018-12-09 22.00.52.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/33562/1c13e71a-c934-ab12-b665-13acb9a2f665.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F33562%2F1c13e71a-c934-ab12-b665-13acb9a2f665.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=83dd1286d8c1272eb560245b815e588a 1x\" loading=\"lazy\"></a></p>\n\n<h1>\n<span id=\"\u307e\u3068\u3081\" class=\"fragment\"></span><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>\u307e\u3068\u3081</h1>\n\n<ul>\n<li>\u30a2\u30a4\u30c7\u30a2\u6b21\u7b2c\u3067\u7d50\u69cb\u8272\u3005\u3067\u304d\u305d\u3046\u3067\u3059\u306d</li>\n<li>\u65e5\u4ed8\u5909\u66f4\u524d\u306b\u6295\u3052\u3089\u308c\u3066\u826f\u304b\u3063\u305f\u3067\u3059\u306d</li>\n<li><a href=\"https://github.com/philopon/.xonsh/blob/7dfa71377a40a821989806686f490682dbde4747/lib/my_xonsh_config/repr_pretty.py#L44-L54\" rel=\"nofollow noopener\" target=\"_blank\">\u5316\u5b66\u30de\u30f3\u306fRDKit\u306e\u69cb\u9020\u3082\u8868\u793a\u3067\u304d\u308b\u69d8\u306b\u3057\u3066\u304a\u3051\u3070\u6357\u308b\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b</a></li>\n</ul>\n\n<div class=\"footnotes\">\n<hr>\n<ol>\n\n<li id=\"fn1\">\n<p><code>RepresentationPrinter -&gt; PrettyPrinter -&gt; _PrettyPrinterBase -&gt; object</code> \u3068\u306a\u3063\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e <code>PrettyPrinter</code> \u306e\u30e1\u30bd\u30c3\u30c9\u3084\u3001 <code>_PrettyPrinterBase</code> \u306e\u30e1\u30bd\u30c3\u30c9\u3067\u3042\u308b <code>indent(indent: int)</code> \u3068 <code>group(indent=0, open=\"\", close=\"\")</code> \u3082\u4f7f\u7528\u53ef\u80fd\u3067\u3059\u3002\u00a0<a href=\"#fnref1\">\u21a9</a></p>\n</li>\n\n</ol>\n</div>\n", "body": "\u3053\u306e\u8a18\u4e8b\u306f[xonsh advent calendar 2018](https://qiita.com/advent-calendar/2018/xonsh)\u306e9\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\ntl;dr\n==\n\u3053\u308c\u3092\u898b\u3066\u304f\u308c\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2018-12-09 22.00.52.png](https://qiita-image-store.s3.amazonaws.com/0/33562/1c13e71a-c934-ab12-b665-13acb9a2f665.png)\n\n\u306f\u3058\u3081\u306b\n==\n\u53bb\u5e74\u306eAC\u306e\u6bb5\u968e\u3067\u306f\u66ab\u304f\u89e6\u3063\u3066\u300c\u307e\u3060\u3060\u306a\u2026\u2026\u300d\u3063\u3066\u306a\u3063\u3066\u3044\u305fxonsh\u3067\u3059\u304c\u3001\u6700\u8fd1\u307e\u305f\u89e6\u3063\u3066\u307f\u305f\u3068\u3053\u308d\u3001\u7d50\u69cb\u826f\u304f\u306a\u3063\u3066\u304a\u308a\u7121\u4e8bzsh\u304b\u3089\u306e\u4e57\u308a\u63db\u3048\u3092\u679c\u3057\u307e\u3057\u305f :clap: :clap: :clap: \n\u306e\u3067\u3001AC\u66f8\u304d\u307e\u3059\u3002\n\n\u6a19\u6e96\u3067\u5bfe\u5fdc\u3057\u3066\u3044\u308bmatplotlib\u4ee5\u5916\u3067\u3082\u3001PIL.Image\u3068\u304b\u8868\u793a\u3067\u304d\u305f\u3089\u6700\u9ad8\u3058\u3083\u306a\u3044\u3067\u3059\u304b\uff1f\uff1f\uff1f\u6700\u9ad8\u3067\u3059\u3088\u306d\uff01\uff01\uff01\u305d\u308c\u3092\u3084\u3063\u3066\u3044\u304d\u307e\u3057\u3087\u3046\uff01\uff01\uff01\n\n\u5185\u5bb9\u306f\u6c4e\u7528\u7684\u3067\u3059\u304c\u3001[iterm2-tools](https://pypi.org/project/iterm2-tools/) \u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u305d\u306e\u307e\u307e\u3060\u3068iterm2\u304c\u7121\u3044\u3068\u52d5\u304b\u306a\u3044\u3067\u3059\u3002\u8a31\u3057\u3066\u304f\u308c\u2026\u2026\u3002\u5168\u4f53\u7684\u306b\u8a31\u3057\u3066\u304f\u308c\u2026\u2026\u3002\n\npretty printing\n==\n\u76ee\u7acb\u305f\u306a\u3044\u6240\u306b [pretty printing](https://xon.sh/api/pretty.html) \u306eAPI\u304c\u751f\u3048\u3066\u304a\u308a\u307e\u3057\u3066\u3001\u305d\u308c\u3092\u4f7f\u7528\u3059\u308b\u3068python\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306exonsh\u3067\u306e\u8868\u793a\u3092\u5f04\u308b\u4e8b\u304c\u51fa\u6765\u307e\u3059\u3002\n\n\u5f04\u308a\u305f\u3044\u30af\u30e9\u30b9\u306b `_repr_pretty_(p: RepresentationPrinter, cycle: bool) -> None` \u3092\u751f\u3084\u305b\u3070\u826f\u3044\u3060\u3051\u3067\u3059\u306d\u3002\n\n\u8868\u793a\u3059\u308b\u6642\u306f\u3001\u7b2c\u4e00\u5f15\u6570\u306b\u4e0e\u3048\u3089\u308c\u308b `RepresentationPrinter` \u306e\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059[^RepresentationPrinter]\n\n\u518d\u5e30\u7684\u306a\u69cb\u9020\u306b\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u306b\u306f `cycle` \u306b `True` \u304c\u6e21\u3055\u308c\u307e\u3059\u306e\u3067\u3001\u30c1\u30a7\u30c3\u30af\u3057\u3066\u7121\u9650\u30eb\u30fc\u30d7\u3057\u306a\u3044\u69d8\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\n\nhook\u3092\u4f7f\u7528\u3057\u3066`PIL.Image`\u3092`import`\u3059\u308b\u6642\u306b `_repr_pretty_` \u3092\u5dee\u3057\u8fbc\u3080\n==\n\u30ed\u30fc\u30c9\u6642\u306b`PIL.Image`\u3092`import`\u3059\u308b\u306a\u3069\u3057\u3066 `_repr_pretty_` \u3092\u5dee\u3057\u8fbc\u3080\u3068\u3001\u8d77\u52d5\u6642\u9593\u304c\u9045\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001hook\u3092\u4f7f\u7528\u3057\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002\n\n`on_import_post_exec_module` hook\u3092\u4f7f\u7528\u3059\u308b\u3068\u826f\u3044\u611f\u3058\u306b\u5dee\u3057\u8fbc\u3081\u308b\u3093\u3058\u3083\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\n```.py:.xonshrc\ndef _pil_repr_pretty_(pil, p, cycle):\n    from io import BytesIO\n    from iterm2_tools.images import display_image_bytes\n\n    b = BytesIO()\n    pil.save(b, format='png')\n    ib = display_image_bytes(b.getbuffer())\n    p.text(ib)\n\n\n@events.on_import_post_exec_module\ndef handler(module=None, **kwargs):\n    if module.__name__ == \"PIL.Image\":\n        module.Image._repr_pretty_ = _pil_repr_pretty_\n```\n\n\u3084\u3063\u3066\u307f\u308b\n==\n\u306f\u3044\u3001\u66f8\u304d\u307e\u3057\u305f\u304b\uff1f\u66f8\u304d\u307e\u3057\u305f\u306d\uff1f\n\u3067\u306f\u3001\u30c6\u30b9\u30c8\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2018-12-09 22.51.59.png](https://qiita-image-store.s3.amazonaws.com/0/33562/7e63cba4-0d5f-1225-e116-06076e15794f.png)\n\n!???!?!?!?!!?!?!?!!\n\n\u539f\u56e0\n==\npygments\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u3066\u3001\u304b\u3064 $COLOR_RESULTS \u304c `True` \u3060\u3068[\u51fa\u529b\u7d50\u679c\u3092pygments.lex\u306b\u901a\u3057\u3066\u3057\u307e\u3063\u3066\u30a8\u30b9\u30b1\u30fc\u30d7\u30b7\u30fc\u30b1\u30f3\u30b9\u304c\u5265\u3052\u308b](https://github.com/xonsh/xonsh/blob/8fe0562318a8b1bc3c39b358ccd698f9d2d8437e/xonsh/main.py#L258-L259)\u307f\u305f\u3044\u3067\u3059\u306d\u2026\u2026\n\n\u4ed5\u65b9\u7121\u3044\u306e\u3067\u3001`$COLOR_RESULTS = False` \u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u2026\u2026\u3057\u304b\u305f\u306a\u3044\u3063\u2026\u2026\n\n```.py:.xonshrc\n$COLOR_RESULTS = False\n```\n\n\u3053\u308c\u3067\u7121\u4e8b\u3001\u8868\u793a\u3055\u308c\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2018-12-09 22.00.52.png](https://qiita-image-store.s3.amazonaws.com/0/33562/1c13e71a-c934-ab12-b665-13acb9a2f665.png)\n\n\u307e\u3068\u3081\n==\n* \u30a2\u30a4\u30c7\u30a2\u6b21\u7b2c\u3067\u7d50\u69cb\u8272\u3005\u3067\u304d\u305d\u3046\u3067\u3059\u306d\n* \u65e5\u4ed8\u5909\u66f4\u524d\u306b\u6295\u3052\u3089\u308c\u3066\u826f\u304b\u3063\u305f\u3067\u3059\u306d\n* [\u5316\u5b66\u30de\u30f3\u306fRDKit\u306e\u69cb\u9020\u3082\u8868\u793a\u3067\u304d\u308b\u69d8\u306b\u3057\u3066\u304a\u3051\u3070\u6357\u308b\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b](https://github.com/philopon/.xonsh/blob/7dfa71377a40a821989806686f490682dbde4747/lib/my_xonsh_config/repr_pretty.py#L44-L54)\n\n\n\n[^RepresentationPrinter]: `RepresentationPrinter -> PrettyPrinter -> _PrettyPrinterBase -> object` \u3068\u306a\u3063\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e `PrettyPrinter` \u306e\u30e1\u30bd\u30c3\u30c9\u3084\u3001 `_PrettyPrinterBase` \u306e\u30e1\u30bd\u30c3\u30c9\u3067\u3042\u308b `indent(indent: int)` \u3068 `group(indent=0, open=\"\", close=\"\")` \u3082\u4f7f\u7528\u53ef\u80fd\u3067\u3059\u3002\n", "coediting": false, "comments_count": 0, "created_at": "2018-12-09T23:12:29+09:00", "group": null, "id": "ff6c64608ef350652eab", "likes_count": 9, "private": false, "reactions_count": 0, "tags": [{"name": "Python", "versions": ["3.7"]}, {"name": "PIL", "versions": []}, {"name": "pillow", "versions": []}, {"name": "xonsh", "versions": ["0.8.3"]}], "title": "xonsh\u306ePython\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u8868\u793a\u3092\u5f04\u308b", "updated_at": "2019-02-28T14:08:51+09:00", "url": "https://qiita.com/philopon/items/ff6c64608ef350652eab", "user": {"description": "", "facebook_id": "", "followees_count": 4, "followers_count": 48, "github_login_name": null, "id": "philopon", "items_count": 30, "linkedin_id": "", "location": "", "name": "", "organization": "", "permanent_id": 33562, "profile_image_url": "https://qiita-image-store.s3.amazonaws.com/0/33562/profile-images/1473686152", "team_only": false, "twitter_screen_name": null, "website_url": "http://philopon.github.io"}, "page_views_count": null}