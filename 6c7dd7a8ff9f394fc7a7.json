{"rendered_body": "<p>\u9069\u5f53\u306a\u306epull\u3059\u308a\u3083\u3044\u3044\u306e\u306b\u81ea\u5206\u3067\u66f8\u3053\u3046\u3068\u3057\u3066\u963f\u5446\u307b\u3069\u5d4c\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002<br>\n\u3068\u308a\u3042\u3048\u305a\u666e\u901a\u306b\u4f7f\u3046\u306e\u306b\u5fc5\u8981\u305d\u3046\u306acabal-install, happy, alex\u3092global\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</p>\n\n<div class=\"code-frame\" data-lang=\"docker\"><div class=\"highlight\"><pre><span class=\"c\"># \u9069\u5b9c\u5909\u66f4(apt\u306e\u30df\u30e9\u30fc\u3082\u4f75\u305b\u3066\u5909\u66f4)</span>\n<span class=\"k\">FROM</span><span class=\"s\"> debian:wheezy</span>\n\n<span class=\"k\">MAINTAINER</span><span class=\"s\"> philopon</span>\n\n<span class=\"k\">ENV</span><span class=\"s\"> DEBIAN_FRONTEND noninteractive</span>\n\n<span class=\"c\"># set language(\u8a2d\u5b9a\u3057\u306a\u3044\u3068alex(\u304c\u4f9d\u5b58\u3057\u3066\u308btf-random)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4e2d\u306b\u30a8\u30e9\u30fc\u3067\u6b62\u307e\u308b)</span>\n<span class=\"k\">ENV</span><span class=\"s\"> LANG   C.UTF-8</span>\n<span class=\"k\">ENV</span><span class=\"s\"> LC_ALL C.UTF-8</span>\n\n<span class=\"c\"># install dependencies</span>\n<span class=\"c\"># libgmp, make, gcc, libc\u3042\u305f\u308a\u306fghc\u304c\u4f9d\u5b58</span>\n<span class=\"c\"># zlib\u306fcabal-install\u304c\u4f9d\u5b58</span>\n<span class=\"c\"># wget, ca-certificates\u306fghc,cabal-install\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u7528\u3002\u30ed\u30fc\u30ab\u30eb\u306b\u4fdd\u5b58\u3057\u3066ADD\u3059\u308c\u3070\u4e0d\u8981</span>\n<span class=\"k\">RUN </span><span class=\"nb\">echo</span> <span class=\"s2\">\"deb http://ftp.jp.debian.org/debian wheezy main\"</span> <span class=\"o\">&gt;</span> /etc/apt/sources.list \n<span class=\"k\">RUN </span>apt-get update <span class=\"o\">&amp;&amp;</span> apt-get <span class=\"nb\">install </span>libgmp10-dev make gcc libc6-dev ca-certificates zlib1g-dev wget <span class=\"nt\">--no-install-recommends</span> <span class=\"nt\">-y</span> <span class=\"o\">&amp;&amp;</span> apt-get clean <span class=\"o\">&amp;&amp;</span> <span class=\"nb\">rm</span> <span class=\"nt\">-rf</span> /var/cache/apt/archives/<span class=\"k\">*</span> /var/lib/apt/lists/<span class=\"k\">*</span>\n\n<span class=\"c\"># install ghc</span>\n<span class=\"k\">RUN </span><span class=\"nb\">cd</span> /tmp <span class=\"o\">&amp;&amp;</span> wget <span class=\"nt\">-q</span> http://www.haskell.org/ghc/dist/7.8.2/ghc-7.8.2-x86_64-unknown-linux-deb7.tar.xz <span class=\"o\">&amp;&amp;</span> <span class=\"nb\">tar </span>xvf ghc-7.8.2-x86_64-unknown-linux-deb7.tar.xz <span class=\"o\">&amp;&amp;</span> <span class=\"nb\">cd </span>ghc-7.8.2 <span class=\"o\">&amp;&amp;</span> ./configure <span class=\"o\">&amp;&amp;</span> make <span class=\"nb\">install</span> <span class=\"o\">&amp;&amp;</span> <span class=\"nb\">cd</span> /tmp <span class=\"o\">&amp;&amp;</span> <span class=\"nb\">rm</span> <span class=\"nt\">-rf</span> <span class=\"k\">*</span>\n\n<span class=\"c\"># install cabal</span>\n<span class=\"k\">RUN </span><span class=\"nb\">cd</span> /tmp <span class=\"o\">&amp;&amp;</span> wget <span class=\"nt\">-q</span> http://hackage.haskell.org/package/cabal-install-1.20.0.2/cabal-install-1.20.0.2.tar.gz <span class=\"o\">&amp;&amp;</span> <span class=\"nb\">tar </span>xvf cabal-install-1.20.0.2.tar.gz <span class=\"o\">&amp;&amp;</span> <span class=\"nb\">cd </span>cabal-install-1.20.0.2 <span class=\"o\">&amp;&amp;</span> ./bootstrap.sh <span class=\"nt\">--global</span> <span class=\"o\">&amp;&amp;</span> <span class=\"nb\">cd</span> /tmp <span class=\"o\">&amp;&amp;</span> <span class=\"nb\">rm</span> <span class=\"nt\">-rf</span> <span class=\"k\">*</span>\n\n<span class=\"c\"># install happy, alex</span>\n<span class=\"k\">RUN </span>cabal update <span class=\"o\">&amp;&amp;</span> cabal <span class=\"nb\">install </span>happy alex <span class=\"nt\">--global</span> <span class=\"o\">&amp;&amp;</span> <span class=\"nb\">rm</span> <span class=\"nt\">-rf</span> /.cabal\n</pre></div></div>\n\n<h1>\n<span id=\"\u53c2\u8003\" class=\"fragment\"></span><a href=\"#%E5%8F%82%E8%80%83\"><i class=\"fa fa-link\"></i></a>\u53c2\u8003</h1>\n\n<ul>\n<li><a href=\"http://d.hatena.ne.jp/mainyaa/20140203/p1\" rel=\"nofollow noopener\" target=\"_blank\">\u6700\u901fDocker\u7814\u7a76\u4f1a(Docker\u306eTips\u309220\u500b\u4e0a\u3052\u3066\u3044\u304f\u305c\u7de8) - Happy New World</a></li>\n<li><a href=\"https://github.com/haskell/cabal/issues/1883\" rel=\"nofollow noopener\" target=\"_blank\">1.20 regression from 1.18 -- /tmp/pkgConf-unix-compat-0.4.164303.1: hGetContents: invalid argument (invalid byte sequence) \u00b7 Issue #1883 \u00b7 haskell/cabal</a></li>\n</ul>\n", "body": "\u9069\u5f53\u306a\u306epull\u3059\u308a\u3083\u3044\u3044\u306e\u306b\u81ea\u5206\u3067\u66f8\u3053\u3046\u3068\u3057\u3066\u963f\u5446\u307b\u3069\u5d4c\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\u3068\u308a\u3042\u3048\u305a\u666e\u901a\u306b\u4f7f\u3046\u306e\u306b\u5fc5\u8981\u305d\u3046\u306acabal-install, happy, alex\u3092global\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```docker\n# \u9069\u5b9c\u5909\u66f4(apt\u306e\u30df\u30e9\u30fc\u3082\u4f75\u305b\u3066\u5909\u66f4)\nFROM debian:wheezy\n\nMAINTAINER philopon\n\nENV DEBIAN_FRONTEND noninteractive\n\n# set language(\u8a2d\u5b9a\u3057\u306a\u3044\u3068alex(\u304c\u4f9d\u5b58\u3057\u3066\u308btf-random)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4e2d\u306b\u30a8\u30e9\u30fc\u3067\u6b62\u307e\u308b)\nENV LANG   C.UTF-8\nENV LC_ALL C.UTF-8\n\n# install dependencies\n# libgmp, make, gcc, libc\u3042\u305f\u308a\u306fghc\u304c\u4f9d\u5b58\n# zlib\u306fcabal-install\u304c\u4f9d\u5b58\n# wget, ca-certificates\u306fghc,cabal-install\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u7528\u3002\u30ed\u30fc\u30ab\u30eb\u306b\u4fdd\u5b58\u3057\u3066ADD\u3059\u308c\u3070\u4e0d\u8981\nRUN echo \"deb http://ftp.jp.debian.org/debian wheezy main\" > /etc/apt/sources.list \nRUN apt-get update && apt-get install libgmp10-dev make gcc libc6-dev ca-certificates zlib1g-dev wget --no-install-recommends -y && apt-get clean && rm -rf /var/cache/apt/archives/* /var/lib/apt/lists/*\n\n# install ghc\nRUN cd /tmp && wget -q http://www.haskell.org/ghc/dist/7.8.2/ghc-7.8.2-x86_64-unknown-linux-deb7.tar.xz && tar xvf ghc-7.8.2-x86_64-unknown-linux-deb7.tar.xz && cd ghc-7.8.2 && ./configure && make install && cd /tmp && rm -rf *\n\n# install cabal\nRUN cd /tmp && wget -q http://hackage.haskell.org/package/cabal-install-1.20.0.2/cabal-install-1.20.0.2.tar.gz && tar xvf cabal-install-1.20.0.2.tar.gz && cd cabal-install-1.20.0.2 && ./bootstrap.sh --global && cd /tmp && rm -rf *\n\n# install happy, alex\nRUN cabal update && cabal install happy alex --global && rm -rf /.cabal\n```\n\n\u53c2\u8003\n====\n* [\u6700\u901fDocker\u7814\u7a76\u4f1a(Docker\u306eTips\u309220\u500b\u4e0a\u3052\u3066\u3044\u304f\u305c\u7de8) - Happy New World](http://d.hatena.ne.jp/mainyaa/20140203/p1)\n* [1.20 regression from 1.18 -- /tmp/pkgConf-unix-compat-0.4.164303.1: hGetContents: invalid argument (invalid byte sequence) \u00b7 Issue #1883 \u00b7 haskell/cabal](https://github.com/haskell/cabal/issues/1883)\n", "coediting": false, "comments_count": 0, "created_at": "2014-06-13T17:19:54+09:00", "group": null, "id": "6c7dd7a8ff9f394fc7a7", "likes_count": 13, "private": false, "reactions_count": 0, "tags": [{"name": "Haskell", "versions": []}, {"name": "ghc", "versions": ["7.8.2"]}, {"name": "Docker", "versions": ["1.0.0"]}], "title": "Docker\u306b\u6700\u65b0\u306eghc\u3092\u5165\u308c\u308b", "updated_at": "2014-06-13T17:19:54+09:00", "url": "https://qiita.com/philopon/items/6c7dd7a8ff9f394fc7a7", "user": {"description": "", "facebook_id": "", "followees_count": 4, "followers_count": 48, "github_login_name": null, "id": "philopon", "items_count": 18, "linkedin_id": "", "location": "", "name": "", "organization": "", "permanent_id": 33562, "profile_image_url": "https://qiita-image-store.s3.amazonaws.com/0/33562/profile-images/1473686152", "team_only": false, "twitter_screen_name": null, "website_url": "http://philopon.github.io"}, "page_views_count": null}